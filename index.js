(()=>{"use strict";var e={250:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.identify=t.subscribe=t.publish=void 0,t.publish=(e,t)=>{window.todesktop.ipc.publish(e,t)},t.subscribe=(e,t)=>window.todesktop.ipc.subscribe(e,t),t.identify=()=>n(void 0,void 0,void 0,(function*(){return window.todesktop.ipc.identify()}))}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}(()=>{const e=window.todesktop,t=t=>(n,i)=>{const r="*"===n?Object.keys(t):[n];for(const n of r){const r=t[n];e.on(r,i)}},i=t=>(n,i)=>{const r="*"===n?Object.keys(t):[n];for(const n of r){const r=t[n];e.on(r,i)}},r={openProtocolURL:"open-protocol-url"};t(r),i(r);const o={show:"show",hide:"hide"};t(o),i(o);const{invoke:s,construct:a}=("client-core","1.0.0-dev",function(e){const t={metadata:{package:{name:"client-core",version:"1.0.0-dev"},invoke:{version:"1.0.0"}},payload:{command:e}};return window.todesktop.invoke(t)});const c=s,w={enterFullscreen:"window.enter-full-screen",exitFullscreen:"window.leave-full-screen"};async function d(e){return a({namespace:"BrowserWindow",args:[e]})}async function u({ref:e}){return s({instanceRef:e,namespace:"BrowserWindow",method:"destroy",args:[]})}t(w),i(w);const f={start:"pushNotifications.start",error:"pushNotifications.error",tokenUpdate:"pushNotifications.tokenUpdate",receive:"pushNotifications.receive"};t(f),i(f);const p={navigate:"did-navigate"};t(p),i(p);var h=n(250);const l=[];let y,m,v=null;const b="https://todesktop.github.io/todesktop-mvc-ipc",g=async(e,t,n)=>{const{x:i,y:r,w:o,h:w,url:d,partition:u}=n,f=await async function(e){return a({namespace:"BrowserView",args:[e]})}({webPreferences:{partition:u}});return await async function(e,t,{url:n,action:i}){"addBrowserView"===i?await async function({ref:e,viewRef:t}){return s({instanceRef:e,namespace:"BrowserWindow",method:"addBrowserView",args:[t]})}({ref:e,viewRef:t}):await async function({ref:e,viewRef:t}){return s({instanceRef:e,namespace:"BrowserWindow",method:"setBrowserView",args:[t]})}({ref:e,viewRef:t});const r=await async function({ref:e}){return s({instanceRef:e,namespace:"BrowserView",property:"webContents"})}({ref:t});await async function({ref:e,URL:t}){return c({instanceRef:e,namespace:"WebContents",method:"loadURL",args:[t]})}({ref:r,URL:n})}(t,f,{url:d,action:e}),await R(t,f,{x:i,y:r,w:o,h:w}),f},R=async(e,t,{x:n,y:i,w:r,h:o})=>{const[a,c]=await async function({ref:e}){return s({instanceRef:e,namespace:"BrowserWindow",method:"getSize",args:[]})}({ref:e});await async function({ref:e,bounds:t}){return s({instanceRef:e,namespace:"BrowserView",method:"setBounds",args:[t]})}({ref:t,bounds:{x:Math.round(a*n),y:Math.round(c*i),width:Math.round(a*r),height:Math.round(c*o)}}),await async function({ref:e,dimensions:t}){return s({instanceRef:e,namespace:"BrowserView",method:"setAutoResize",args:[t]})}({ref:t,dimensions:{width:!0,height:!0,horizontal:!0,vertical:!0}})};(async()=>{y=await d({width:750,height:480,frame:!1,vibrancy:"under-window",transparent:!0,titleBarStyle:"hiddenInset",trafficLightPosition:{x:12,y:15}}),m=await d({width:400,height:160}),await g("addBrowserView",y,{x:0,y:0,w:.3,h:1,url:`${b}/aside.html`}),window.addEventListener("unload",(async()=>{await Promise.all([u({ref:y}),u({ref:m})])}))})(),(0,h.subscribe)("workspace:created",(async({title:e})=>{l.find((t=>t.title===e))||(l.push({title:e}),(0,h.publish)("workspace:synced",{title:e}))})),(0,h.subscribe)("workspace:selected",(async({title:e})=>{l.some((t=>t.title===e))&&(await g("setBrowserView",m,{x:0,y:0,w:1,h:1,url:`${b}/spotlight.html`,partition:`memory:${e}`}),await async function({ref:e,title:t}){return s({instanceRef:e,namespace:"BrowserWindow",method:"setTitle",args:[t]})}({ref:m,title:e}),v&&await async function({ref:e,viewRef:t}){return s({instanceRef:e,namespace:"BrowserWindow",method:"removeBrowserView",args:[t]})}({ref:y,viewRef:v}),v=await g("addBrowserView",y,{x:.3,y:0,w:.7,h:1,url:`${b}/main.html`,partition:`persist:${e}`}))}))})()})();